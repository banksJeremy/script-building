<!doctype html><head><meta charset="utf-8"><title>Script</title><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="apple-mobile-web-app-capable" content="yes"><body><noscript>JavaScript is required.</noscript><script>var require = function(filename) {if (! (filename in require.loaded)) {var contents = require.files[filename];if (! contents) {throw new Error("Required file was not compiled: " + filename);};require.loaded[filename] = contents();};return require.loaded[filename];};require.files = {};require.loaded = {};require.files["./main"] = function() { return (function() {var exports = this;(function() {
// BEGIN FILE: ./main
    (function() {
      var Ant, AntSim, canvas, sim, size, _ref;
      document.title = "Langton's Ant";
      size = 64;
      document.body.innerHTML = "<canvas width=" + size + " height=" + size + ">";
      canvas = document.getElementsByTagName("canvas")[0];
      document.body.style.background = canvas.style.background = "black";
      document.body.style.color = canvas.style.color = "white";
      canvas.style.width = "100%";
      canvas.style.color = "rgba(225, 200, 175, 1)";
      _ref = require("./langton"), AntSim = _ref.AntSim, Ant = _ref.Ant;
      sim = new AntSim(canvas, size);
      sim.ants = [new Ant(-5, -7, 0, "rgba(0, 128, 255, .75)"), new Ant(5, 8, 2, "rgba(255, 0, 128, .75)")];
      sim.run();
    }).call(this);
// END FILE: ./main
})();return exports;}).call({});};require.files["./langton"] = function() { return (function() {var exports = this;(function() {
// BEGIN FILE: ./langton
    (function() {
      var Ant, DOWN, LEFT, LangtonAntSim, RIGHT, UP, _ref;
      var __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };
      _ref = [0, 1, 2, 3], UP = _ref[0], RIGHT = _ref[1], DOWN = _ref[2], LEFT = _ref[3];
      exports.Ant = Ant = (function() {
        function Ant(x, y, direction, color) {
          this.x = x != null ? x : 0;
          this.y = y != null ? y : 0;
          this.direction = direction != null ? direction : 0;
          this.color = color != null ? color : "rgba(0, 128, 255, .5)";
        }
        Ant.prototype.turn = function(direction) {
          return this.direction = (this.direction + 4 + direction) % 4;
        };
        return Ant;
      })();
      exports.AntSim = LangtonAntSim = (function() {
        LangtonAntSim.prototype.drawInterval = 100;
        LangtonAntSim.prototype.advanceInterval = 5;
        function LangtonAntSim(canvas, width, height) {
          this.canvas = canvas;
          this.width = width;
          this.height = height != null ? height : this.width;
          this.graphics = this.canvas.getContext("2d");
          this.ants = [new Ant];
          null;
        }
        LangtonAntSim.prototype.drawPixel = function(x, y, color) {
          if (color == null) {
            color = this.canvas.style.color;
          }
          this.graphics.fillStyle = color;
          return this.graphics.fillRect(this.width / 2 + x, this.height / 2 + y, 1, 1);
        };
        LangtonAntSim.prototype.cell = function(x, y, value) {
          var _base, _ref, _ref2;
          if (value != null) {
            return ((_ref = (_base = this.cell)[y]) != null ? _ref : _base[y] = {})[x] = value;
          } else {
            return (_ref2 = this.cell[y]) != null ? _ref2[x] : void 0;
          }
        };
        LangtonAntSim.prototype.draw = function(x, y) {
          var ant, _i, _len, _ref, _ref2, _ref3, _ref4, _ref5, _results;
          this.graphics.fillStyle = "rgba(0, 0, 0, .5)";
          this.graphics.fillRect(0, 0, this.width, this.height);
          for (x = _ref = -this.width / 2, _ref2 = this.width / 2; (_ref <= _ref2 ? x < _ref2 : x > _ref2); (_ref <= _ref2 ? x += 1 : x -= 1)) {
            for (y = _ref3 = -this.height / 2, _ref4 = this.height / 2; (_ref3 <= _ref4 ? y < _ref4 : y > _ref4); (_ref3 <= _ref4 ? y += 1 : y -= 1)) {
              if (this.cell(x, y)) {
                this.drawPixel(x, y);
              }
            }
          }
          _ref5 = this.ants;
          _results = [];
          for (_i = 0, _len = _ref5.length; _i < _len; _i++) {
            ant = _ref5[_i];
            _results.push(this.drawPixel(ant.x, ant.y, ant.color));
          }
          return _results;
        };
        LangtonAntSim.prototype.advance = function() {
          var ant, _i, _len, _ref;
          _ref = this.ants;
          for (_i = 0, _len = _ref.length; _i < _len; _i++) {
            ant = _ref[_i];
            ant.turn(this.cell(ant.x, ant.y) ? +1 : -1);
            this.cell(ant.x, ant.y, !this.cell(ant.x, ant.y));
            if (ant.direction === UP) {
              ant.y += 1;
            } else if (ant.direction === RIGHT) {
              ant.x += 1;
            } else if (ant.direction === DOWN) {
              ant.y -= 1;
            } else if (ant.direction === LEFT) {
              ant.x -= 1;
            }
          }
          return null;
        };
        LangtonAntSim.prototype.run = function() {
          this.stop();
          this.advance.interval = setInterval((__bind(function() {
            return this.advance();
          }, this)), this.advanceInterval);
          this.draw.interval = setInterval((__bind(function() {
            return this.draw();
          }, this)), this.drawInterval);
          return null;
        };
        LangtonAntSim.prototype.stop = function() {
          if (this.draw.interval != null) {
            clearInterval(this.draw.interval);
            this.draw.interval = null;
          }
          if (this.advance.interval != null) {
            clearInterval(this.advance.interval);
            this.advance.interval = null;
          }
          return null;
        };
        return LangtonAntSim;
      })();
    }).call(this);
// END FILE: ./langton
})();return exports;}).call({});};require("./main");require("./langton");</script>
